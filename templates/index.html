<!DOCTYPE html>
<html>

<head>
    <title>首页</title>
    <link rel="shortcut icon" href="{{static_url('favicon.png')}}" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.3/dist/vue.js"></script>
    <style>
        ul li {
           list-style: none;
        }
        .cell {
            margin: 10px 0px;
        }
    </style>
</head>

<body>
<div id="app">
    <nav class="navbar navbar-expand-sm bg-light" style="padding-left: 400px;">
                <a class="navbar-brand" href="/" style="color: #4797d6"><b>H</b>56</a>
                <a class="navbar-brand" href='/tasks' style="color: #23527c;margin-left: 100px;"><i class="fa fa-history"></i> 历史</a>
    </nav>
    <div class="container mt-3">
        <h3>脚本列表</h3>
        <ul class="list-group">
            <li>
                <div class="custom-control custom-radio cell" v-for="(test,index) in test_list">
                    <input type="radio" class="custom-control-input" :id="index" name="script" :value="test" @change="onChange">
                    <label class="custom-control-label" :for="index">{{!test}}</label>
                </div>
            </li>
        </ul>
        <input type="button" class="btn btn-info" value="执行" @click="onSubmit">
    </div>
</div>
</body>
<script>
    var test_list = {% raw json_encode(test_list) %};
    console.log(test_list);
    test_list = ["test_hello_world", "test_hello_world2"];
    new Vue({
        el: "#app",
        data: {
            test_list: test_list,
            checked: null
        },
        methods: {
            onChange (e) {
                var checked = e.target.checked;
                if (checked) {
                    this.checked = e.target.value;
                }
            },
            onSubmit() {
                var _this = this;
                $.get('/' + _this.checked + '/test', function(res){
                    alert("测试触发成功，进度消息将会通过POPO通知到你。现在你可以去打游戏喝咖啡去了 ^_^")
                })
            }
        }
    });
</script>
</html>